# 教材生成用プロンプト：自動販売機で学ぶオブジェクト指向

このドキュメントは、**Java オブジェクト指向の解説・練習問題**を一貫した形式で生成するためのプロンプト（指示書）です。生成するコンテンツは `Doc/EXERCISE.md`（練習問題ファイル基本仕様）に準拠し、**自動販売機**を題材に、**約2時間**で実施できる構成にしてください。

---

## 1. 準拠する仕様

- **参照ファイル**: `Doc/EXERCISE.md`
- 生成する教材（解説＋練習問題）は、次の点を満たすこと。
  - **タイトル**: ファイル先頭に演習全体のタイトルを1つ記載する。
  - **セクション**: テーマ・難易度ごとに `##` 見出しで区切る。
  - **問題ブロック**: 各問題は次の形式を守る。
    - **問題番号と概要**: `**【問題n】** 説明文`
    - **メソッド仕様**（必要な場合）: メソッド名・引数・戻り値を問題文直後に列挙する。
    - **区切り線**: 問題文とヒント・解答の間に水平線（`---`）または指定の HTML で区切る。
    - **ヒント**: `<details>` / `<summary>` で折り畳み。「ヒント」と表示し、答えになりすぎない説明にする。
    - **解答**: `<details>` / `<summary>` で折り畳み。「解答1」「解答2」など。コードはコードブロックで記載する。

---

## 2. 題材と登場人物

### 題材
- **自動販売機**（ジュース・飲料の販売をイメージしたクラス設計・実装）

### 登場人物（編成はこのまま使用する）
| 役割 | 名前 | キャラクター |
|------|------|--------------|
| 講師 | **カバ先生** | オブジェクト指向を優しく教える。難しい用語は補足やホバー解説でフォローする。 |
| 受講者（男子） | **男の子** | ちょっとおっちょこちょい。よくある勘違いや忘れがちなポイントを質問・失敗する役。 |
| 受講者（女子） | **女の子** | 勘が良くてよく気が利く。要点をまとめたり、男の子の疑問に先回りして整理する役。 |

- 解説や会話では、上記3人のやりとりを交えながら進める形式でもよい（必須ではない）。  
- **対象者は Java の初学者**なので、難しい表現は避け、必要なときは補足を入れるか、ホバーで解説を表示できる形（`title` 属性など）を検討する。

---

## 3. 必須の構成

### 3.1 冒頭：オブジェクト指向の復習（必須）

**「これ以降の本編の前」に、これまでに学んだオブジェクト指向の復習を必ず入れる。**

- 長さは**簡単でよい**（目安：読了 5〜10 分程度、実施時 10〜15 分程度）。
- 次のトピックを**すべて**含めること。順序はカリキュラムに合わせてよい。

| カリキュラム No. | 復習で触れる内容 |
|------------------|------------------|
| 8 | **Chapter 6 オブジェクト作成** — クラスとオブジェクト、インスタンス化（`new`）、フィールドとメソッド、文字列操作（String） |
| 9 | **Chapter 7 オブジェクトの仕組み (1)** — コンストラクタ、コンストラクタのオーバーロード、カプセル化（`private` / getter・setter）、`this` |
| 10 | **Chapter 7 オブジェクトの仕組み (2)** — `static`（クラスメンバ）、インスタンスとクラスの違い、参照型、`null`、イミュータブル（String の性質） |
| 11 | **Chapter 8 継承** — スーパークラス・サブクラス、`extends`、オーバーライド、Object クラス |
| 12 | **Chapter 9 & 10** — 抽象クラス（`abstract`）、インタフェース（`interface`、`implements`）、「型としての決まり」 |
| 13–14 | **9.2 多態性（ポリモーフィズム）** — 同じ型（スーパークラス/インタフェース）で受け、実際のインスタンスに応じて振る舞いが変わること、アップキャスト、インタフェースの効果・機能の差し替え |
| 15（任意） | **Chapter 12 & 14** — コレクション（List）・例外（try-catch）に軽く触れる程度でよい（時間に余裕があれば）。 |

- 復習部分でも、用語は初学者向けにやさしくし、必要なら補足やホバー解説を入れる。

### 3.2 本編：自動販売機での解説・練習

- 上記復習の**直後**から、自動販売機を題材にした解説と練習問題を開始する。
- 進行の流れは **`Doc/カリキュラムと進行.md`** を参考にする。
  - No.8〜16 の「進行の狙い」「狙い・詳細」に沿って、クラス設計 → コンストラクタ・カプセル化 → 継承 → 抽象クラス/インタフェース → 多態性 の順で扱うとよい。
- 各セクションには、EXERCISE 仕様に沿った**問題ブロック**（問題文・ヒント・解答）を配置する。
- 自動販売機の例では、例えば次のようなクラス・概念が考えられる（あくまで例）。
  - 飲料（ドリンク）を表すクラス、自動販売機本体を表すクラス
  - コンストラクタ・カプセル化で「在庫」や「金額」を安全に扱う
  - 継承：特定の飲料（茶系・炭酸系など）のサブクラス
  - インタフェース／抽象クラス：「販売可能」「選択可能」などの型の決まり
  - 多態性：同じ「飲料」型で、実際の種類に応じて表示や価格が変わる

---

## 4. トータル時間

- **約2時間**（120 分）を目安に構成する。
- 目安の内訳（調整可）:
  - オブジェクト指向の復習: 約 10〜15 分
  - 自動販売機の説明・クラス設計の解説: 約 20〜30 分
  - 練習問題（基本〜発展）: 約 60〜75 分
  - まとめ・質疑: 約 5〜10 分

---

## 5. 参考ファイル

- **練習問題の形式**: `Doc/EXERCISE.md`
- **進行・カリキュラム**: `Doc/カリキュラムと進行.md`（No.8〜16 のオブジェクト指向まわりを特に参照）
- **問題は自販機で統一**: 混乱を防ぐため、練習問題の題材は自動販売機（VendMachine）に統一する。自販機でのステップ形式の例は `Lesson9/Excercise9_2.html` や講義HTML（`Lesson9/オブジェクト指向② コンストラクタとカプセル化.html`）を参照する。

---

## 6. 出力形式の希望

- 教材本体は **Markdown（.md）** または **HTML（.html）** のいずれかで生成する。
- EXERCISE に合わせ、見出し・問題番号・ヒント（`<details>`）・解答（コードブロック）が一貫していること。
- 専門用語には、必要に応じて `<abbr title="ここに短い解説">用語</abbr>` や括弧内補足で初学者向けの説明を付与する。

---

## 7. 講義進行用PDFの作成手順

講義進行用のPDFは、各レッスンフォルダ（例: `Lesson9/`）に **講義HTML と同じ内容の印刷用HTML** を用意し、そこからPDFを生成する。**ページの区切りでブロックが切れないよう** 印刷用CSSを適用する。

### 7.1 印刷用HTMLの作成

- **ファイル名**: 講義テーマに合わせて付ける（例: `text-obj2.html`）。
- **配置**: 該当レッスンフォルダ（例: `Lesson9/text-obj2.html`）。
- **内容**: 講義用HTML（例: `オブジェクト指向② コンストラクタとカプセル化.html`）と同一の本文。デザインは `Doc/4-デザインルール.md` に準拠したインラインスタイルのままでよい。
- **ヒント・解答の配置（PDF用）**: PDFには折り畳み（展開）機能がないため、**本文中にはヒント・解答を置かず**、すぐに見えないようにする。代わりに **PDFの末尾** に「【ヒント・解答一覧】」セクションを追加し、問題番号ごとにヒント・解答例をまとめて添付する。受講者は問題と巻末を行き来して参照できる。
  - 本文の各問題では、ヒント・解答の `<details>` を削除し、代わりに「※ヒント・解答は末尾の「ヒント・解答一覧」を参照。」の一文を入れる。
  - 末尾に見出し「【ヒント・解答一覧】」でセクションを設け、各問題のヒント・解答例を問題番号順に掲載する。

### 7.2 印刷用CSS（ページ区切り対策）

`<head>` 内に次の `@media print` を入れる。

```css
@media print {
  /* これらのブロックの途中で改ページしない */
  section, pre, details, h2, h3, .print-keep-together {
    page-break-inside: avoid;
  }
  /* 見出しの直後で改ページしない */
  h2, h3 { page-break-after: avoid; }
  details { break-inside: avoid; }
  pre { break-inside: avoid; white-space: pre-wrap; word-wrap: break-word; }
}
```

- **page-break-inside: avoid** … `section`・`pre`・`details`・`h2`・`h3`・`.print-keep-together` がページの途中で分割されないようにする。
- **page-break-after: avoid** … 見出しの直後で改ページしない。
- **break-inside: avoid** … 詳細ブロック・コードブロックがページ境で切れないようにする。

### 7.3 PDFの生成

1. **ブラウザから印刷する場合**  
   印刷用HTML（例: `Lesson9/text-obj2.html`）をブラウザで開き、「印刷」→「PDFに保存」で `text-obj2.pdf` などとして保存する。

2. **Chrome ヘッドレスで一括生成する場合**（Windows の例）  
   同一フォルダで次を実行する。HTMLは `file://` の絶対パスで指定する。

   ```powershell
   Set-Location "Lesson9の絶対パス"
   & "C:\Program Files\Google\Chrome\Application\chrome.exe" --headless --disable-gpu --print-to-pdf="$PWD\text-obj2.pdf" "file:///$($PWD.Path -replace '\\','/')/text-obj2.html"
   ```

   - 出力PDFは同じレッスンフォルダに作成する（例: `Lesson9/text-obj2.pdf`）。

### 7.4 まとめ

| 項目 | 内容 |
|------|------|
| 印刷用HTML | 講義HTMLと同内容、印刷用CSSを `<head>` に追加 |
| ヒント・解答 | 本文には出さず、PDF末尾に「ヒント・解答一覧」としてまとめて添付（行き来して参照） |
| ファイル名例 | `text-obj2.html` → `text-obj2.pdf` |
| レイアウト | `page-break-inside: avoid` 等でブロック単位の改ページを防ぐ |

---

以上を満たす形で、「オブジェクト指向の復習」から「自動販売機での解説・練習問題」までを一続きの教材として生成してください。

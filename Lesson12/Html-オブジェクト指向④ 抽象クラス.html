【テキスト】 オブジェクト指向④ ～抽象クラス～
<div style="max-width: 800px; margin: 0 auto; font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif; line-height: 1.6; color: #333; padding: 20px; border: 1px solid #eee; background-color: #fff;">
<h1 style="padding-left: 10px; background-color: #f0f8ff; color: #0033ff; font-size: 24px; margin-bottom: 30px;">オブジェクト指向学習カリキュラム</h1>
<p style="margin-bottom: 10px;"><strong>抽象クラス</strong>（第12回）</p>

<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">この単元の前に：継承の復習</h2>
<p style="margin-bottom: 10px;">前回までに「継承」と「オーバーライド」を自販機で学んでいます。短くおさらいします。</p>
<h3 style="padding-left: 10px; color: #0033ff; font-size: 16px; margin-top: 15px; margin-bottom: 10px;">復習：前回までに学んだこと</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 5px; border-left: 5px solid #0033ff;">
<ul style="padding-left: 20px; margin-bottom: 0;">
<li style="margin-bottom: 10px;"><strong>継承</strong> — <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">extends スーパークラス名</code> でサブクラスがスーパークラスの機能を引き継ぐ。</li>
<li style="margin-bottom: 10px;"><strong>オーバーライド</strong> — スーパークラスと同じ名前・同じ引数のメソッドをサブクラスで定義し直すこと。オーバーライドしたメソッドには <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">public</code> をつけておく。</li>
<li><strong>VendMachine</strong> — 自販機の共通の流れ（<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> など）を持ち、サブクラスで差分を実装してきた。</li>
</ul>
</div>
<h3 style="padding-left: 10px; color: #0033ff; font-size: 16px; margin-top: 20px; margin-bottom: 10px;">この単元で学ぶこと</h3>
<p style="margin-bottom: 0;">この単元では「抽象クラス」を学びます。次回インタフェース、その次に多態性の土台になります。</p>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【1】具体的な学習目標</h2>
<p style="margin-bottom: 10px;">この単元を終えたとき、以下のことができればゴールです。</p>
<ul style="padding-left: 20px; margin: 0;">
<li style="margin-bottom: 10px;">抽象クラスの役割（基本とするためのクラスとしてしか使わず、サブクラスに実装を任せる）を説明できる。</li>
<li style="margin-bottom: 10px;"><code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">abstract class</code> と <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">abstract メソッド</code> の書き方を理解する。</li>
<li style="margin-bottom: 10px;">「1つでも抽象メソッドがあるクラスは抽象クラス」であることを理解する。</li>
</ul>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【2】導入：基本とするクラスに具体的なメソッドは要らない</h2>
<div style="background-color: #f2f2f2; padding: 15px; border-radius: 5px; border-left: 5px solid #888888; margin-bottom: 10px;">
<p style="margin: 0;"><strong>カバ先生：</strong>「サブクラスで書き換えるのなら、そもそもスーパークラスに具体的に書く必要はないよね。なので、基本とするためのクラスとしてしか使わないなら、スーパークラスのメソッドを抽象メソッドにします。」</p>
</div>
<div style="background-color: #e6f4ff; padding: 15px; border-radius: 5px; border-left: 5px solid #4da6ff;">
<p style="margin: 0;"><strong>ユウタ：</strong>「1つでも抽象メソッドがあるクラスが、抽象クラスなんですね。」</p>
</div>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【3】抽象クラス：設計図だけのクラス</h2>
<p style="margin-bottom: 10px;">抽象クラスは、<strong>そのクラス単体では <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">new</code> でインスタンスを作れないクラス</strong>です。クラス名の前に <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">abstract</code> を付けます。</p>
<ul style="padding-left: 20px;">
<li style="margin-bottom: 10px;"><strong>abstract class クラス名</strong> — 抽象クラス。サブクラスで継承して使うことを前提にする。</li>
<li style="margin-bottom: 10px;"><strong>abstract メソッド</strong> — 中身（本体）を書かず、サブクラスで「必ず実装する」ことを強制する。</li>
<li style="margin-bottom: 10px;">抽象クラスを継承したサブクラスは、すべての abstract メソッドを実装しないとコンパイルエラーになる。</li>
</ul>

<!-- 【図の仕様】継承の説明用（抽象クラス・スーパー/サブの関係） -->
<div style="background-color: #f0f8ff; border: 1px solid #0033ff; border-radius: 8px; padding: 20px; margin: 15px 0;">
<h4 style="margin: 0 0 12px 0; color: #0033ff; font-size: 14px;">図で描く内容（クラス図の仕様）</h4>
<p style="margin: 0 0 12px 0; font-size: 13px; color: #333;">以下の構成でクラス図を描く。日本語の説明を入れる。</p>
<dl style="margin: 0; font-size: 13px; line-height: 1.7;">
<dt style="font-weight: bold; color: #0033ff; margin-top: 10px;">抽象クラス（スーパークラス）</dt>
<dd style="margin-left: 0; padding-left: 1em;">
<strong>VendingMachine</strong><br>
・フィールド：<code>drinkName</code>（String）、<code>stock</code>（int）<br>
・メソッド：<code>buy()</code>
</dd>
<dt style="font-weight: bold; color: #0033ff; margin-top: 10px;">継承したサブクラス1</dt>
<dd style="margin-left: 0; padding-left: 1em;">
<strong>VendingHotNoodle</strong> クラス<br>
・追加フィールド：<code>water</code>（int）<br>
・説明：温かい麺用自販機（お湯の量を管理）
</dd>
<dt style="font-weight: bold; color: #0033ff; margin-top: 10px;">継承したサブクラス2</dt>
<dd style="margin-left: 0; padding-left: 1em;">
<strong>Vending2Items</strong> クラス<br>
・追加フィールド：<code>drinkName1</code>（String）、<code>drinkName2</code>（String）、<code>stock1</code>（int）、<code>stock2</code>（int）、<code>selected</code>（int）<br>
・メソッド：<code>buy()</code> — 選択したアイテムを購入する<br>
・説明：2種類の商品を扱う自販機（選択番号でどちらを出すか決める）
</dd>
</dl>
<p style="margin: 12px 0 0 0; font-size: 12px; color: #666;">※図では VendingMachine から下に矢印を伸ばし、VendingHotNoodle と Vending2Items が継承している関係を示す。</p>
</div>

<h3 style="padding-left: 10px; color: #0033ff; font-size: 16px; margin-top: 20px; margin-bottom: 10px;">前回までの基本クラス VendMachine</h3>
<p style="margin-bottom: 10px;">基底クラスとして <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">drinkName</code> と <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">stock</code> を持ち、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> で「〇〇を購入しました」と表示するだけのシンプルなクラスです。この単元では、ここに <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">abstract</code> や継承を自分で付けていくハンズオンに挑戦します。</p>
<pre style="font-family: monospace; background-color: #fdf5e6; color: #333; padding: 15px; border-radius: 5px; border: 1px solid #e1dbbd; overflow-x: auto;"><span style="color: #666;">// 基底クラス：drinkName と stock を持ち、buy で購入表示するだけ</span>
<span style="color: #0033ff;">public class</span> VendMachine {

    <span style="color: #0033ff;">private</span> String drinkName;
    <span style="color: #0033ff;">private</span> <span style="color: #0033ff;">int</span> stock;

    <span style="color: #0033ff;">public</span> VendMachine(String drinkName, <span style="color: #0033ff;">int</span> stock) {
        <span style="color: #0033ff;">this</span>.drinkName = drinkName;
        <span style="color: #0033ff;">this</span>.stock = stock;
    }

    <span style="color: #0033ff;">public</span> <span style="color: #0033ff;">void</span> buy() {
        <span style="color: #0033ff;">if</span> (stock >= 1) {
            stock--;
            System.out.println(drinkName + <span style="color: #cc0000;">"を購入しました"</span>);
        } <span style="color: #0033ff;">else</span> {
            System.out.println(<span style="color: #cc0000;">"在庫がありません"</span>);
        }
    }
}</pre>
<p style="font-size:12px;color:#666;margin-top:8px;margin-bottom:6px;">※最初に基本クラスをここからドラッグして読み込みます。メインメソッドは含みません。</p>
<details style="margin: 0 0 12px 0;">
<summary style="cursor: pointer; font-weight: bold; color: #0033ff;">📋 基本クラス（VendMachine）をドラッグでコピー（クリックで開く）</summary>
<div style="background:#e6f7ff;padding:15px;border:2px dashed #1890ff;border-radius:6px;margin-top:8px;">
  <p style="font-size:12px;color:#0050b3;margin-bottom:8px;font-weight:bold;">🖱️ マウスで全選択して Eclipse やメモ帳へドラッグしてください</p>
  <textarea readonly style="width:100%;height:220px;font-family:Consolas,monospace;font-size:13px;padding:10px;border:1px solid #91d5ff;background:#fff;display:block;user-select:all !important;">// 基底クラス：drinkName と stock を持ち、buy で購入表示するだけ
public class VendMachine {

    private String drinkName;
    private int stock;

    public VendMachine(String drinkName, int stock) {
        this.drinkName = drinkName;
        this.stock = stock;
    }

    public void buy() {
        if (stock >= 1) {
            stock--;
            System.out.println(drinkName + "を購入しました");
        } else {
            System.out.println("在庫がありません");
        }
    }
}</textarea>
</div>
</details>
<details style="margin: 0 0 12px 0;">
<summary style="cursor: pointer; font-weight: bold; color: #0033ff;">📋 VendingHotNoodle をドラッグでコピー（クリックで開く）</summary>
<div style="background:#e6f7ff;padding:15px;border:2px dashed #1890ff;border-radius:6px;margin-top:8px;">
  <p style="font-size:12px;color:#0050b3;margin-bottom:8px;font-weight:bold;">🖱️ マウスで全選択して Eclipse やメモ帳へドラッグしてください</p>
  <textarea readonly style="width:100%;height:180px;font-family:Consolas,monospace;font-size:13px;padding:10px;border:1px solid #91d5ff;background:#fff;display:block;user-select:all !important;">// 温かい麺用自販機（お湯の量を管理）— ただのクラス
public class VendingHotNoodle {

    /** お湯の量（mL） */
    private int water;

    /** コンストラクタ：お湯量を初期設定 */
    public VendingHotNoodle(int water) {
        this.water = water;
    }

    public void buy() {
        if (water >= 200) {
            water -= 200;
            System.out.println("温かい麺を購入しました");
        } else {
            System.out.println("お湯が足りません");
        }
    }
}</textarea>
</div>
</details>
<p style="margin-bottom: 0;">上記はすべてただのクラスです。この基本クラスをもとに、ハンズオンで <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">abstract</code> や継承を自分で付けていきます。</p>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【4】練習問題</h2>
<div>
<strong>【問題】VendMachine に abstract を付けて継承する</strong><br>
上の基本クラス <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">VendMachine</code> に、自分で <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">abstract</code> と抽象メソッド（例：<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">beforeBuy()</code>、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">dispense()</code>）を付け、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">SimpleVend</code> というサブクラスで継承・実装してみましょう。
</div>
<div style="border-bottom: 1px solid #ccc; margin: 10px 0;"></div>
<details style="margin: 0.5em 0;">
<summary style="cursor: pointer; font-weight: bold; color: #555;">▶ ヒント</summary>
<p>VendMachine を <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">public abstract class</code> にし、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> の流れのうちサブクラスに任せたい部分を abstract メソッドにします。<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">public class SimpleVend extends VendMachine</code> で継承し、@Override で抽象メソッドを実装します。</p>
</details>
<div style="margin-top: 25px;">
<strong>【問題】Vending2Items クラスを自分で書いてみる</strong><br>
<strong>2種類の商品</strong>を扱う <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">Vending2Items</code> クラスを、ただのクラスとして自分で書いてみましょう。継承はしなくてかまいません。
</div>
<div style="margin: 8px 0 0 0; font-size: 13px;">
仕様：フィールドに <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">drinkName1</code>・<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">drinkName2</code>（String）、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">stock1</code>・<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">stock2</code>・<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">selected</code>（int）を持ち、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">selected</code> が <strong>0 か 1</strong> で購入する商品が変わるように <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> を実装すること。最初はエラーが出てもかまいません。自分で組んでいけるように挑戦してみてください。
</div>
<div style="border-bottom: 1px solid #ccc; margin: 10px 0;"></div>
<details style="margin: 0.5em 0;">
<summary style="cursor: pointer; font-weight: bold; color: #555;">▶ ヒント</summary>
<p><code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> 内で <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">selected == 0</code> のときは商品1（stock1 を減らし drinkName1 を表示）、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">selected == 1</code> のときは商品2（stock2 を減らし drinkName2 を表示）にする。在庫チェックを忘れずに。</p>
</details>
<details style="margin: 0.5em 0;">
<summary style="cursor: pointer; font-weight: bold; color: #0033ff;">▶ 解答例</summary>
<p style="font-size:12px;color:#666;margin-bottom:5px;">【解説・確認用】selected が 0 のときは商品1、1 のときは商品2を出します。ただのクラスとして実装した例です。</p>
<pre style="font-family: monospace; background-color: #fdf5e6; color: #333; padding: 15px; border-radius: 5px; border: 1px solid #e1dbbd; overflow-x: auto;">public class Vending2Items {
    private String drinkName1, drinkName2;
    private int stock1, stock2, selected;

    public Vending2Items(String n1, String n2, int s1, int s2, int sel) {
        drinkName1 = n1; drinkName2 = n2;
        stock1 = s1; stock2 = s2; selected = sel;
    }

    public void buy() {
        if (selected == 0) {
            if (stock1 >= 1) {
                stock1--;
                System.out.println(drinkName1 + "を購入しました");
            } else {
                System.out.println("在庫がありません");
            }
        } else {
            if (stock2 >= 1) {
                stock2--;
                System.out.println(drinkName2 + "を購入しました");
            } else {
                System.out.println("在庫がありません");
            }
        }
    }
}</pre>
<details style="margin-top:10px;">
<summary style="cursor: pointer; font-weight: bold; color: #0033ff;">📋 解答をドラッグでコピー（クリックで開く）</summary>
<div style="background:#e6f7ff;padding:15px;border:2px dashed #1890ff;border-radius:6px;margin-top:8px;">
  <p style="font-size:12px;color:#0050b3;margin-bottom:8px;font-weight:bold;">🖱️ マウスで全選択して Eclipse やメモ帳へドラッグしてください</p>
  <textarea readonly style="width:100%;height:220px;font-family:Consolas,monospace;font-size:13px;padding:10px;border:1px solid #91d5ff;background:#fff;display:block;user-select:all !important;">public class Vending2Items {
    private String drinkName1, drinkName2;
    private int stock1, stock2, selected;

    public Vending2Items(String n1, String n2, int s1, int s2, int sel) {
        drinkName1 = n1; drinkName2 = n2;
        stock1 = s1; stock2 = s2; selected = sel;
    }

    public void buy() {
        if (selected == 0) {
            if (stock1 >= 1) {
                stock1--;
                System.out.println(drinkName1 + "を購入しました");
            } else {
                System.out.println("在庫がありません");
            }
        } else {
            if (stock2 >= 1) {
                stock2--;
                System.out.println(drinkName2 + "を購入しました");
            } else {
                System.out.println("在庫がありません");
            }
        }
    }
}</textarea>
</div>
</details>
</details>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【5】まとめ</h2>
<ul style="padding-left: 20px;">
<li style="margin-bottom: 10px;"><strong>抽象クラス</strong> — <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">abstract class</code> で宣言。そのクラスでは <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">new</code> できない。1つでも抽象メソッドがあるクラスが抽象クラス。</li>
<li style="margin-bottom: 10px;">抽象メソッドはサブクラスで必ず実装する。オーバーライドしたメソッドには <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">public</code> をつけておく。</li>
<li style="margin-bottom: 10px;">次回はインタフェース、その次に多態性（ポリモーフィズム）を学びます。</li>
</ul>
</section>
</div>

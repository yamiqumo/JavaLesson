【テキスト】 オブジェクト指向⑥-2 ～多態性（アップキャスト・引数と戻り値）～
<div style="max-width: 800px; margin: 0 auto; font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif; line-height: 1.6; color: #333; padding: 20px; border: 1px solid #eee; background-color: #fff;">
<h1 style="padding-left: 10px; background-color: #f0f8ff; color: #0033ff; font-size: 24px; margin-bottom: 30px;">オブジェクト指向学習カリキュラム</h1>
<p style="margin-bottom: 10px;"><strong>多態性（ポリモーフィズム）②</strong> — アップキャスト・メソッドの引数と戻り値（第14-2回）</p>

<!-- ========== 復習：第14-1回の内容をソース付き・会話で理解 ========== -->
<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【復習】第14-1回でやったこと — ソースコードでおさらい</h2>
<p style="margin-bottom: 15px;">第14-2回に入る前に、第14-1回の内容を<strong>ソースコードを見ながら</strong>振り返ります。ポイントは「<strong>自販機型の変数・配列</strong>に、カップ麺自販機・2品目自販機・ガチャガチャ自販機を入れて、<strong>同じ <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> を呼ぶと、中身に応じて違う動きになる</strong>」ことです。3人で会話しながら確認していきましょう。</p>

<h3 style="padding-left: 10px; color: #0033ff; font-size: 16px; margin-top: 20px; margin-bottom: 10px;">第14-1回で使った4つのクラス（概要）</h3>
<p style="margin-bottom: 10px;">自販機の<strong>スーパークラス（抽象クラス）</strong>が <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">VendingMachine</code> で、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> を抽象メソッドとして「購入処理を必ず持つ」と約束しています。3つのサブクラス（カップ麺自販機クラス・2品目自販機クラス・ガチャガチャ自販機クラス）がそれぞれ <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> を実装しています。</p>

<div style="background-color: #f2f2f2; padding: 15px; border-radius: 5px; border-left: 5px solid #888888; margin-bottom: 12px;">
<p style="margin: 0;"><strong>カバ先生：</strong>「第14-1回では、『自販機型の配列』に3種類の自販機を入れて、for 文で <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> を呼ぶと、どの機種でもその機種の動きになったよね。今日はその『型で受ける』部分をもう少しはっきりさせて、<strong>アップキャスト</strong>と、<strong>メソッドの引数・戻り値</strong>でどう使うかを学ぶよ。」</p>
</div>

<h3 style="padding-left: 10px; color: #0033ff; font-size: 16px; margin-top: 20px; margin-bottom: 10px;">復習用ソース①：抽象クラス VendingMachine</h3>
<pre style="font-family: monospace; background-color: #fdf5e6; color: #333; padding: 15px; border-radius: 5px; border: 1px solid #e1dbbd; overflow-x: auto;"><span style="color: #666;">// 自販機のスーパークラス（抽象クラス）。サブクラスは必ず buy() を実装する</span>
<span style="color: #0033ff;">public abstract class</span> VendingMachine {
    <span style="color: #0033ff;">public abstract void</span> buy();
}</pre>

<h3 style="padding-left: 10px; color: #0033ff; font-size: 16px; margin-top: 20px; margin-bottom: 10px;">復習用ソース②：サブクラス3つ（抜粋）</h3>
<p style="margin-bottom: 8px;">カップ麺自販機・2品目自販機・ガチャガチャ自販機の3クラスは、いずれも <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">extends VendingMachine</code> で継承し、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> の中身だけが違います。</p>
<pre style="font-family: monospace; background-color: #fdf5e6; color: #333; padding: 15px; border-radius: 5px; border: 1px solid #e1dbbd; overflow-x: auto;"><span style="color: #666;">// カップ麺自販機クラス：購入 → 2分待つ → お湯を注ぐ</span>
<span style="color: #0033ff;">public class</span> VendingHotNoodle <span style="color: #0033ff;">extends</span> VendingMachine {
    @Override <span style="color: #0033ff;">public void</span> buy() { <span style="color: #666;">/* 温かい麺を購入しました。2分待っています... お湯を注ぎました */</span> }
}

<span style="color: #666;">// 2品目自販機クラス：selected で コーラ or お茶</span>
<span style="color: #0033ff;">public class</span> Vending2Items <span style="color: #0033ff;">extends</span> VendingMachine {
    @Override <span style="color: #0033ff;">public void</span> buy() { <span style="color: #666;">/* コーラ or お茶 を購入しました */</span> }
}

<span style="color: #666;">// ガチャガチャ自販機クラス：乱数で レア / ノーマル / 外れ</span>
<span style="color: #0033ff;">public class</span> VendingHobby <span style="color: #0033ff;">extends</span> VendingMachine {
    @Override <span style="color: #0033ff;">public void</span> buy() { <span style="color: #666;">/* Math.random() で 10% / 70% / 20% */</span> }
}</pre>

<h3 style="padding-left: 10px; color: #0033ff; font-size: 16px; margin-top: 20px; margin-bottom: 10px;">復習用ソース③：Main で「自販機型の配列」にまとめて buy() を呼ぶ</h3>
<p style="margin-bottom: 10px;">ここが第14-1回の肝です。<strong>VendingMachine 型の配列</strong>に、3種類のインスタンスを入れ、for で <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> を呼んでいます。変数名は、自販機型のインスタンスを表すとき <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm</code> や <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm2</code> のように <strong>vm</strong> で統一すると読みやすくなります。</p>
<pre style="font-family: monospace; background-color: #fdf5e6; color: #333; padding: 15px; border-radius: 5px; border: 1px solid #e1dbbd; overflow-x: auto;"><span style="color: #666;">// 自販機型の配列に、3種類の自販機を入れる（サブクラスのインスタンスをスーパークラス型で受けている）</span>
VendingMachine[] machines = <span style="color: #0033ff;">new</span> VendingMachine[3];
machines[0] = <span style="color: #0033ff;">new</span> VendingHotNoodle();
machines[1] = <span style="color: #0033ff;">new</span> Vending2Items(0);   <span style="color: #666;">// 0 → 1つ目（コーラ）</span>
machines[2] = <span style="color: #0033ff;">new</span> VendingHobby();

<span style="color: #666;">// どの機種でも同じように buy() を呼べる → 中身に応じてカップ麺・コーラ/お茶・ガチャガチャの動きになる</span>
<span style="color: #0033ff;">for</span> (<span style="color: #0033ff;">int</span> i = 0; i < machines.length; i++) {
    machines[i].buy();
}</pre>

<div style="background-color: #e6f4ff; padding: 15px; border-radius: 5px; border-left: 5px solid #4da6ff; margin-bottom: 12px;">
<p style="margin: 0;"><strong>ユウタ：</strong>「配列の型が <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">VendingMachine[]</code> だから、カップ麺自販機でも2品目自販機でもガチャガチャ自販機でも入れられる。で、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">machines[i].buy()</code> と書くだけで、そのとき入っている機種の <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> が動く、ということですね。」</p>
</div>
<div style="background-color: #ffe6f0; padding: 15px; border-radius: 5px; border-left: 5px solid #e8a0b0;">
<p style="margin: 0;"><strong>ナナコ：</strong>「使う側は『どれが入っているか』をいちいち if で分けなくていい。『自販機だから <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> してね』で通じる。これが多態性の便利なところですよね。」</p>
</div>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<!-- 箸休め -->
<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #888; padding-left: 10px; color: #555; font-size: 16px; margin-bottom: 15px;">ちょっと一息 — 知識の解像度を下げてイメージする</h2>
<div style="background-color: #f8f8f8; padding: 15px; border-radius: 5px; border-left: 5px solid #bbb;">
<p style="margin: 0;"><strong>カバ先生：</strong>「『解像度を下げる』って、細かい仕様をいったん忘れて、大ざっぱに捉えること。今の場合、『自販機という型の箱に、カップ麺自販機でもガチャガチャ自販機でも入れていい。で、買うボタン（buy()）を押したら、その箱の中身が自分で正しい動きをしてくれる』— そんなイメージで十分だよ。」</p>
</div>
<div style="background-color: #e6f4ff; padding: 15px; border-radius: 5px; border-left: 5px solid #4da6ff; margin-top: 10px;">
<p style="margin: 0;"><strong>ユウタ：</strong>「実家の廊下に、飲料用・カップ麺用・お菓子用の自販機が3台並んでるんですけど、お金入れてボタン押す、って点では同じですよね。」</p>
</div>
<div style="background-color: #ffe6f0; padding: 15px; border-radius: 5px; border-left: 5px solid #e8a0b0; margin-top: 10px;">
<p style="margin: 0;"><strong>ナナコ：</strong>「プログラムでも、『自販機型の変数 vm に何が入っていても、vm.buy() でその子の買い方が実行される』って、それと同じ感覚でいいんですね。」</p>
</div>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<!-- 前提知識 -->
<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【前提知識】この単元で必要なこと</h2>
<ul style="padding-left: 20px; margin: 0;">
<li style="margin-bottom: 10px;">第14-1回で「自販機型の配列にサブクラスのインスタンスを入れ、for で <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> を呼ぶ」ことをやった。</li>
<li style="margin-bottom: 10px;">サブクラスのインスタンスを、スーパークラス型の変数で受けている（これが<strong>アップキャスト</strong>）。</li>
<li style="margin-bottom: 10px;">メソッドには<strong>引数</strong>（渡す値）と<strong>戻り値</strong>（返ってくる値）があり、その型も「自販機型」にできる。</li>
</ul>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<!-- 学習目標 -->
<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【学習目標】第14-2回でできるようになること</h2>
<ul style="padding-left: 20px; margin: 0;">
<li style="margin-bottom: 10px;">「多態性」とは、同じ型（例：<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">VendingMachine</code>）の変数で受けても、<strong>実際のインスタンスに応じてメソッドの動きが変わる</strong>ことだと説明できる。</li>
<li style="margin-bottom: 10px;"><strong>アップキャスト</strong>（サブクラスのインスタンスをスーパークラス型の変数に代入すること）の意味と書き方を理解する。</li>
<li style="margin-bottom: 10px;">メソッドの<strong>引数</strong>や<strong>戻り値</strong>の型をスーパークラス型にすると、呼び出し側が「どの具象クラスか」を気にしなくてよくなる利点を理解する。</li>
</ul>
<p style="margin-top: 12px; margin-bottom: 0; font-size: 14px; color: #555;">※ 自販機型の変数名は <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm</code>・<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm2</code> のように <strong>vm</strong> で統一すると読みやすい。</p>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<!-- 振り返り -->
<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【振り返り】復習の一言</h2>
<div style="background-color: #f2f2f2; padding: 15px; border-radius: 5px; border-left: 5px solid #888888;">
<p style="margin: 0;"><strong>カバ先生：</strong>「第14-1回の振り返りだ。『自販機型の変数（や配列）に、カップ麺自販機・2品目自販機・ガチャガチャ自販機のどれを入れても、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> を呼べば、その中身の動きが実行される』— この一点を押さえたうえで、次は『1個の変数で受ける』ことと、『メソッドの引数・戻り値で型を使う』ことを見ていくよ。」</p>
</div>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<!-- 内容の説明：ポリモーフィズムとアップキャスト -->
<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【内容の説明】ポリモーフィズムの復習とアップキャスト</h2>
<div style="background-color: #f2f2f2; padding: 15px; border-radius: 5px; border-left: 5px solid #888888; margin-bottom: 10px;">
<p style="margin: 0;"><strong>カバ先生：</strong>「抽象クラスやインタフェースは『このメソッドを必ず持ってね』という型の決まり。その<strong>型の変数</strong>に、いろいろな具象クラスのインスタンスを入れて、同じメソッド名を呼ぶと、<strong>実際に入っているインスタンスの側</strong>のメソッドが動く。これを<strong>多態性（ポリモーフィズム）</strong>という。」</p>
</div>
<div style="background-color: #e6f4ff; padding: 15px; border-radius: 5px; border-left: 5px solid #4da6ff;">
<p style="margin: 0;"><strong>ユウタ：</strong>「変数の型は同じ <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">VendingMachine</code> なのに、中身がカップ麺自販機ならカップ麺の動き、ガチャガチャ自販機ならガチャガチャの動きになる、ということですね。」</p>
</div>

<h3 style="padding-left: 10px; color: #0033ff; font-size: 16px; margin-top: 20px; margin-bottom: 10px;">図1：ポリモーフィズムのイメージ</h3>
<p style="margin-bottom: 10px;">同じ型（VendingMachine）の変数 <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm</code> に、異なるサブクラスのインスタンスを入れると、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm.buy()</code> を呼んだときに<strong>中身に応じて異なる動き</strong>をします。</p>
<div style="border: 2px dashed #ccc; min-height: 80px; padding: 15px; text-align: center; color: #888; background-color: #fafafa; border-radius: 8px; margin: 15px 0;">【図の挿入①】図1：ポリモーフィズムのイメージ</div>

<h3 style="padding-left: 10px; color: #0033ff; font-size: 16px; margin-top: 25px; margin-bottom: 10px;">図2：アップキャスト後はスーパークラスのメソッドだけ呼べる</h3>
<p style="margin-bottom: 10px;">アップキャストした変数からは、<strong>その変数の型（スーパークラス）が持っているメソッドだけ</strong>を呼べます。サブクラスだけが持つメソッドは、スーパークラス型の変数からは<strong>呼べません</strong>（コンパイルエラーになります）。</p>
<div style="border: 2px dashed #ccc; min-height: 80px; padding: 15px; text-align: center; color: #888; background-color: #fafafa; border-radius: 8px; margin: 15px 0;">【図の挿入②】図2：アップキャスト後はスーパークラスのメソッドだけ呼べる</div>

<h3 style="padding-left: 10px; color: #0033ff; font-size: 16px; margin-top: 25px; margin-bottom: 10px;">アップキャスト：スーパークラス型の変数で受ける</h3>
<p style="margin-bottom: 10px;">サブクラスのインスタンスを、スーパークラス型の変数に代入することを<strong>アップキャスト</strong>といいます。代入後、その変数から呼べるのは、その型が持っているメソッドだけです。ただし、<strong>実際に動くのは、中身のインスタンスがオーバーライドしたメソッド</strong>です。</p>
<p style="margin-bottom: 10px;">例：<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">VendingMachine vm = new VendingHotNoodle();</code> のあと <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm.buy();</code> を呼ぶと、VendingHotNoodle（カップ麺自販機クラス）の <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> が実行され、カップ麺の購入メッセージと「2分待つ」「お湯を注ぐ」が表示されます。</p>
<div style="background-color: #ffe6f0; padding: 15px; border-radius: 5px; border-left: 5px solid #e8a0b0;">
<p style="margin: 0;"><strong>ナナコ：</strong>「変数 <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm</code> の型は VendingMachine だから、コンパイル時には『VendingMachine が持っているメソッドだけ』が許される。でも実行時には、中身が VendingHotNoodle（カップ麺自販機クラス）だから、カップ麺自販機の <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> が動く、という二段構えなんですね。」</p>
</div>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<!-- メソッドの引数でのポリモーフィズム -->
<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【内容の説明】メソッドの引数でのポリモーフィズム</h2>
<p style="margin-bottom: 10px;">メソッドの<strong>引数の型</strong>をスーパークラス型にしておくと、「その型を継承したクラス」なら何を渡してもよい、という設計になります。呼び出し側は「VendingMachine 型の引数に、VendingHotNoodle でも Vending2Items でも VendingHobby でも渡せる」とだけ考えればよく、中身に応じて正しい <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> が動きます。引数名も <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm</code> でそろえると分かりやすいです。</p>
<pre style="font-family: monospace; background-color: #fdf5e6; color: #333; padding: 15px; border-radius: 5px; border: 1px solid #e1dbbd; overflow-x: auto;"><span style="color: #666;">// 引数が「自販機型」なので、どのサブクラスでも渡せる。引数名は vm で統一</span>
<span style="color: #0033ff;">public static void</span> doBuy(VendingMachine vm) {
    vm.buy();   <span style="color: #666;">// 実際に渡されたインスタンスの buy() が動く</span>
}

<span style="color: #666;">// 呼び出し例</span>
doBuy(<span style="color: #0033ff;">new</span> VendingHotNoodle());
doBuy(<span style="color: #0033ff;">new</span> Vending2Items(1));
doBuy(<span style="color: #0033ff;">new</span> VendingHobby());</pre>
<div style="background-color: #ffe6f0; padding: 15px; border-radius: 5px; border-left: 5px solid #e8a0b0;">
<p style="margin: 0;"><strong>ナナコ：</strong>「『自販機を1台受け取って、buy() してね』というメソッドにしておけば、カップ麺自販機を渡してもガチャガチャ自販機を渡しても、同じ <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">doBuy</code> で扱えるんですね。」</p>
</div>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<!-- メソッドの戻り値でのポリモーフィズム -->
<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【内容の説明】メソッドの戻り値でのポリモーフィズム</h2>
<p style="margin-bottom: 10px;">メソッドの<strong>戻り値の型</strong>をスーパークラス型にすると、「その型のインスタンスを返す」と宣言できます。中で <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">return new VendingHotNoodle();</code> のようにサブクラスのインスタンスを返しても、受け取る側は <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">VendingMachine</code> 型の変数（例：<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm</code>）で受け、<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> を呼べば、返ってきた実際のインスタンスの <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> が動きます。</p>
<pre style="font-family: monospace; background-color: #fdf5e6; color: #333; padding: 15px; border-radius: 5px; border: 1px solid #e1dbbd; overflow-x: auto;"><span style="color: #666;">// 戻り値の型が「自販機型」なので、サブクラスのインスタンスを return してよい</span>
<span style="color: #0033ff;">public static</span> VendingMachine getMachine(<span style="color: #0033ff;">int</span> kind) {
    <span style="color: #0033ff;">if</span> (kind == 0) <span style="color: #0033ff;">return</span> <span style="color: #0033ff;">new</span> VendingHotNoodle();
    <span style="color: #0033ff;">if</span> (kind == 1) <span style="color: #0033ff;">return</span> <span style="color: #0033ff;">new</span> Vending2Items(0);
    <span style="color: #0033ff;">return</span> <span style="color: #0033ff;">new</span> VendingHobby();
}

<span style="color: #666;">// 受け取った側は VendingMachine 型の変数 vm で受け、buy() を呼べる</span>
VendingMachine vm = getMachine(1);
vm.buy();   <span style="color: #666;">// Vending2Items の buy() が動く</span></pre>
<div style="background-color: #f2f2f2; padding: 15px; border-radius: 5px; border-left: 5px solid #888888;">
<p style="margin: 0;"><strong>カバ先生：</strong>「引数でも戻り値でも、型を抽象クラスやインタフェースにしておくことで、<strong>実装の差し替え</strong>がしやすくなり、拡張しやすい設計になる。変数名は <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm</code>・<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm2</code> のように vm でそろえると、『自販機型の変数だな』と一目で分かるよ。」</p>
</div>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<!-- 実際のコードを書いてみる -->
<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【実際のコードを書いてみる】ハンズオン</h2>
<p style="margin-bottom: 15px;">第14-1回の自販機4クラス（VendingMachine・VendingHotNoodle・Vending2Items・VendingHobby）を用意したうえで、次のどちらか（または両方）に挑戦してみましょう。</p>
<ol style="padding-left: 20px; margin: 0;">
<li style="margin-bottom: 12px;"><strong>doBuy(VendingMachine vm)</strong> メソッドを作り、main から <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">doBuy(new VendingHotNoodle());</code> や <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">doBuy(new VendingHobby());</code> で呼び出し、それぞれの <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">buy()</code> が動くことを確認する。</li>
<li style="margin-bottom: 12px;"><strong>getMachine(int kind)</strong> メソッド（戻り値の型は VendingMachine）を作り、kind の値で異なるサブクラスのインスタンスを return する。main で <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">VendingMachine vm = getMachine(1); vm.buy();</code> のように受け取り、動きを確認する。</li>
</ol>
<div style="background-color: #e6f4ff; padding: 15px; border-radius: 5px; border-left: 5px solid #4da6ff;">
<p style="margin: 0;"><strong>ユウタ：</strong>「変数名を vm にそろえると、どの変数が自販機型かすぐ分かって書きやすいです。」</p>
</div>
</section>

<hr style="border: none; border-top: 1px solid #ccc; margin: 1.5em 0;">

<!-- まとめ -->
<section style="margin-bottom: 30px;">
<h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">【まとめ】第14-2回・第14回全体</h2>
<ul style="padding-left: 20px;">
<li style="margin-bottom: 10px;"><strong>多態性（ポリモーフィズム）</strong> — 抽象クラス型やインタフェース型の変数に具象のインスタンスを入れ、同じメソッドを呼ぶと、<strong>実際のインスタンスの側</strong>のメソッドが動く。</li>
<li style="margin-bottom: 10px;"><strong>アップキャスト</strong> — サブクラス・実装クラスのインスタンスを、スーパークラス型・インタフェース型の変数に代入すること。変数名は <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm</code>・<code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">vm2</code> のように vm で統一すると読みやすい。</li>
<li style="margin-bottom: 10px;">メソッドの<strong>引数</strong>や<strong>戻り値</strong>の型をスーパークラス・インタフェースにしておくと、呼び出し側は「型」だけを意識すればよく、実装の差し替えがしやすい。</li>
</ul>
</section>
</div>

【テキスト】 オブジェクト指向⑦ ～Static（クラス変数）～
<div style="max-width: 800px; margin: 0 auto; font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif; line-height: 1.6; color: #333; padding: 20px; border: 1px solid #eee; background-color: #fff;">
<h1 style="padding-left: 10px; background-color: #f0f8ff; color: #0033ff; font-size: 24px; margin-bottom: 30px;">オブジェクト指向学習カリキュラム</h1>
<p style="margin-bottom: 10px;"><strong>Static（クラス変数）</strong> — クラス全体で共有する情報の扱い方と、これまでのオブジェクト指向（データ型～継承まで）の総復習（第15回）</p>

<section style="margin-bottom: 30px;">
  <h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">1. この回で学ぶこと</h2>
  <p style="margin-bottom: 10px;">第15回では、これまで学んできた内容を、次の2つの軸で総復習します。</p>
  <ul style="margin-top: 0; padding-left: 20px; margin-bottom: 10px;">
    <li><strong>Static（クラス変数）</strong>：1台1台ではなく「クラス全体で共有したい情報」の扱い方を学ぶ。</li>
    <li><strong>これまでの流れの総復習</strong>：データ型・演算子・if / for などの制御構文・メソッド・クラス・継承（＋多態性）までを、テキストとソースコード・練習問題で振り返る。</li>
  </ul>
  <p style="margin-bottom: 10px;">今回の授業時間では、最初に Static の座学＋ハンズオンを行い、後半の約2時間はこれまでの内容の総復習（座学の振り返り＋練習問題の時間）とします。<strong>DB と SQL の学習は次回以降の回に分けて、ゆっくり丁寧に扱っていきます。</strong>このテキストの後半（3章以降）は、そのための予習・参考資料として用意してあります。</p>
</section>

<section style="margin-bottom: 30px;">
  <h2 style="border-left: 5px solid #0033ff; padding-left: 10px; color: #0033ff; font-size: 18px; margin-bottom: 15px;">2. Static（クラス変数）のイメージ</h2>
  <p style="margin-bottom: 10px;">これまでの自販機クラスでは、1台ごとに「飲み物の名前」「在庫数」などをフィールドとして持っていました。これは<strong>インスタンス変数</strong>と呼ばれ、「1台1台で違ってよい情報」です。</p>
  <p style="margin-bottom: 10px;">一方で、「今、<strong>全部で何台の自販機が動いているか</strong>」のように、クラス全体で1つだけ持ちたい情報もあります。このようなときに使うのが、<strong>Static（クラス変数）</strong>です。</p>

  <div style="background-color: #f2f2f2; padding: 15px; border-radius: 5px; border-left: 5px solid #888888; margin-bottom: 12px;">
    <p style="margin: 0;"><strong>カバ先生：</strong>「インスタンス変数は『1台ごとに違う情報』、クラス変数（static）は『このクラス全体で1つだけ持つ情報』です。例えば、VendingMachine クラスで『今何台あるか』や『これまでの売上合計』などを数えるときに使えます。」</p>
  </div>

  <p style="margin-top: 15px; margin-bottom: 5px; font-size: 13px; text-align: center;">図1：Static とインスタンス化のイメージ</p>
  <img src="https://raw.githubusercontent.com/yamiqumo/JavaLesson/main/Lesson15/diagrams/static%E3%81%A8%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E5%8C%96.png"
       alt="Static とインスタンス化の関係を表した図"
       style="max-width: 100%; width: 100%; height: auto; max-height: 85vh; object-fit: contain; display: block; margin: 0 auto 5px auto;">
  <p style="text-align: right; font-size: 11px; margin-top: 5px;">
    <a href="mailto:?subject=【JavaLesson】図が表示されません&body=ページ名：オブジェクト指向⑦ Static（クラス変数）%0D%0A図：図1：Staticとインスタンス化のイメージ">図が表示されないときはこちら</a>
  </p>

  <h3 style="padding-left: 10px; color: #0033ff; font-size: 16px; margin-top: 20px; margin-bottom: 10px;">2-1. クラス変数 machineCount で「自販機が何台あるか」を数える</h3>
  <p style="margin-bottom: 10px;">次のコードは、VendingMachine クラスに <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">static int machineCount</code> を追加し、コンストラクタが呼ばれるたびに 1 ずつ増やしていく例です。</p>

  <pre style="font-family: monospace; background-color: #fdf5e6; color: #333; padding: 15px; border-radius: 5px; border: 1px solid #e1dbbd; overflow-x: auto;"><span style="color: #666;">// 自動販売機クラス（クラス変数で「何台あるか」を数える）</span>
<span style="color: #0033ff;">public class</span> VendingMachine {

	<span style="color: #666;">// フィールド（インスタンス変数）</span>
	<span style="color: #0033ff;">private String</span> drinkName = <span style="color: #d14;">"水"</span>;
	<span style="color: #0033ff;">private int</span> stock = 8;

	<span style="color: #666;">// クラス変数（このクラス全体で1つだけある情報）</span>
	<span style="color: #0033ff;">public static int</span> machineCount = 0;

	<span style="color: #666;">// コンストラクタ（自販機が1台増えるたびに machineCount を +1 する）</span>
	<span style="color: #0033ff;">public</span> VendingMachine() {
		machineCount = machineCount + 1;
	}

	<span style="color: #666;">// 在庫を1本減らして購入するメソッド</span>
	<span style="color: #0033ff;">public void</span> buy() {
		<span style="color: #0033ff;">if</span> (stock &gt; 0) {
			stock = stock - 1;
			System.out.println(drinkName + <span style="color: #d14;">"を購入しました。"</span>);
		} <span style="color: #0033ff;">else</span> {
			System.out.println(<span style="color: #d14;">"在庫がありません。"</span>);
		}
	}
}</pre>

  <details style="margin: 0 0 12px 0;">
    <summary style="cursor: pointer; font-weight: bold; color: #0033ff;">📋 VendingMachine（machineCount 付き）をドラッグでコピー（クリックで開く）</summary>
    <div style="background:#e6f7ff;padding:15px;border:2px dashed #1890ff;border-radius:6px;margin-top:8px;">
      <p style="font-size:12px;color:#0050b3;margin-bottom:8px;font-weight:bold;">🖱️ マウスで全選択して Eclipse やメモ帳へドラッグしてください</p>
      <textarea readonly style="width:100%;height:260px;font-family:Consolas,monospace;font-size:13px;padding:10px;border:1px solid #91d5ff;background:#f4f4f4;color:#333;display:block;user-select:all !important;">// 自動販売機クラス（クラス変数で「何台あるか」を数える）
public class VendingMachine {

	// フィールド（インスタンス変数）
	private String drinkName = "水";
	private int stock = 8;

	// クラス変数（このクラス全体で1つだけある情報）
	public static int machineCount = 0;

	// コンストラクタ（自販機が1台増えるたびに machineCount を +1 する）
	public VendingMachine() {
		machineCount = machineCount + 1;
	}

	// 在庫を1本減らして購入するメソッド
	public void buy() {
		if (stock &gt; 0) {
			stock = stock - 1;
			System.out.println(drinkName + "を購入しました。");
		} else {
			System.out.println("在庫がありません。");
		}
	}
}</textarea>
    </div>
  </details>

  <p style="margin-bottom: 10px;">このクラスを使って main メソッド側で自販機を3台 new すると、最後に <code style="font-family: monospace; background-color: #f5f5f5; padding: 1px 4px; border-radius: 3px;">VendingMachine.machineCount</code> は 3 になります。</p>

  <pre style="font-family: monospace; background-color: #fdf5e6; color: #333; padding: 15px; border-radius: 5px; border: 1px solid #e1dbbd; overflow-x: auto;"><span style="color: #666;">// main メソッド側のイメージ</span>
VendingMachine vm1 = <span style="color: #0033ff;">new</span> VendingMachine();
VendingMachine vm2 = <span style="color: #0033ff;">new</span> VendingMachine();
VendingMachine vm3 = <span style="color: #0033ff;">new</span> VendingMachine();
System.out.println(<span style="color: #d14;">"このクラスの自販機は、今 "</span> + VendingMachine.machineCount + <span style="color: #d14;">"台あります。"</span>);</pre>
</section>


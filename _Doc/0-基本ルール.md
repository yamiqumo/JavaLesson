# オブジェクト指向教材 基本ルール

構成の基本ルールを定める。**デザイン（色・余白・フォント等）は `_Doc/4-デザインルール.md` を参照。**  
**役割の分担**: 出力・ファイル名・HTML・**Java コード規約（用語・アクセス修飾子・1行書き禁止・インデント等）は `.cursorrules` に一元化**し、_Doc では「理由・補足・具体例」と他ファイルへの参照に留める。重複は避け、矛盾しないようにする。**万一 _Doc と .cursorrules の記述が食い違う場合は、.cursorrules を正文とする。**

---

## 講座の目的と受講者像

- **受講者像**: 文系などロジックに強くない人でも学べる講座。専門用語は補足し、段階を踏んだ説明で誰でもついていけるようにする。
- **もう一つの目的**: IT 講師としての心構えを学ぶ場。教材を作る・教える立場を意識し、「なぜそう書くか」「現場ではどうか」の視点も盛り込む。

---

## コラム

テキスト・練習問題のところどころに**コラム**（実務・チーム開発の視点、講師の心構え）を入れる。1テーマあたり数行〜短い段落。例：コメントの重要性、命名のわかりやすさ、チーム開発での読みやすさ。

---

## ファイル構成（1レッスンあたり）

| 区分 | 内容 |
|------|------|
| **概要** | 前提知識・ポイント・対象テキストページ・動画一覧。学習の入口。 |
| **テキスト** | 本編（復習・目標・導入・説明・サンプルコード・まとめ）。 |
| **練習問題** | 基本・発展の演習。 |
| **確認テスト** | 理解度確認（ある場合とない場合あり）。 |

- **ファイル名・HTML（1行目・body内のみ・スタイル）・題材・用語**: **`.cursorrules` に規定**。練習問題の構成は下記のとおり。
- **練習問題は3本立て**: 基本①（動物クラス）・基本②（社員クラス）・発展③（配列・繰り返し等）。それぞれ3段階程度で拡張。問題の設定は **table** で見やすくする。**練習問題の題材は動物（animal）・社員（employee）のみ**とし、自販機（VendingMachine）は**テキスト本編のみのサンプル**とする（練習問題では使わない）。発展③も動物・社員のクラスを用いる。
- **概要の構成・デザイン**: `_Doc/4-デザインルール.md` の「6. 概要ファイル」に従う。
- **動画リンクの元データ**: `_Doc/1-カリキュラムと進行.md`。概要ではここから URL を取得し、`<a href="..." target="_blank" rel="noopener noreferrer">` でリンクする。
- **公開範囲**: アップロードするのは概要・テキスト・練習問題・確認テストの HTML のみ。_Doc は非公開のため、HTML 本文に「カリキュラムを参照」など _Doc 向けの記述を書かない。

### テキスト本編の流れ（構成の基本）

テキスト本編は、次の流れで構成する。受講者がイメージを持ちやすいよう、**時折「箸休め」と「ちょっとイメージできるような話」を、カバ先生・ユウタ・ナナコの3人の会話で挟む**。

| 順序 | セクション | 内容 |
|------|------------|------|
| 1 | **復習** | 前回の内容を**ソースコード付き**でおさらいする。3人の会話で本質（何を学んだか・なぜそう書くか）を理解させる。 |
| 2 | **箸休め（任意）** | 「ちょっとイメージできるような話をしてみようか」と展開し、身近なたとえ話を3人で会話して負荷を和らげる。 |
| 3 | **前提知識** | この単元で必要な既習事項を短く列挙する。 |
| 4 | **学習目標** | この単元で「できるようになること」を箇条書きで示す。 |
| 5 | **振り返り** | 復習の要点を一言で確認する。 |
| 6 | **内容の説明** | 本題の説明。会話で理解のポイント（なぜそうなるか・どう使うか）を押さえる。図のプレースホルダーを入れる場合はここに配置。 |
| 7 | **実際のコードを書いてみる** | ハンズオンで、説明した内容を手を動かして試す。 |
| 8 | **まとめ** | 単元の要点を箇条書きで振り返る。 |

- **自販機題材での変数名**: VendingMachine 型のインスタンス変数（参照変数）は **vm**・**vm2** のように **vm** で統一する。会話やコード例でも「vm でそろえると読みやすい」と説明してよい。
- 復習では、**前回使ったクラス・メソッドのソースを掲載し**、3人の会話で「何をしたか」「なぜそう書くか」が伝わるようにする。

### 自販機サブクラスの呼び名（テキスト・会話での統一）

講義テキスト・会話で自販機の種類を言うときは、次の呼び名で統一する。

| コード上のクラス名 | テキスト・会話での呼び名 |
|--------------------|---------------------------|
| VendingHotNoodle  | **カップ麺自販機クラス**（略：カップ麺自販機） |
| Vending2Items     | **2品目自販機クラス**（略：2品目自販機） |
| VendingHobby      | **ガチャガチャ自販機クラス**（略：ガチャガチャ自販機） |

- 「温麺用」「温麺機」「2品目機」「ガチャ機」などの表記は使わず、上記にそろえる。

---

## 講義用テキスト・基本クラス

- **前回までの基本クラスを土台**に、当単元の追加内容をハンズオンで挑戦させる。
- **基本クラスは textarea でドラッグコピー可能**にし、ファイルごとに掲載。読み込み→貼り付けの流れは `.cursorrules` および `_Doc/4-デザインルール.md` の「講義用テキストの基本クラス・コピー用エリア」に従う。
- **第13回（インタフェース）**: テキストは自販機題材で統一（クラス名は `.cursorrules` のとおり VendingMachine）。Movable で理論→ハンズオン（implements と move()）→テキスト内で Speakable 問題（ヒント・解答例は折りたたみ）。
- **図の差し込み**: テキスト HTML では、図（diagram）を差し込む**場所だけを確保**する。破線の枠と「【図の挿入〇】」のようなプレースホルダーを置き、実際の画像（`<img>`）の挿入は手作業で行う。

### 自販機の基本クラス設計（統一参照）

講義・練習で自販機を題材にするときの**基本設計の参照**。フィールド・コンストラクタ（引数なしは1行可）・メソッドに**わかりやすいコメントを適宜入れる**。必要に応じて unitPrice / salesAmount / stockSupply / getStock などを追加する。

```java
public class VendingMachine {

	// フィールド
	String drinkName = "水";
	int stock = 8;           // 在庫数
	// 必要に応じて以下を追加
	int unitPrice = 100;     // 1本の値段
	int salesAmount = 0;    // 売上合計

	// 引数なしのコンストラクタ（中身が空なので1行でよい）
	public VendingMachine() {}

	// コンストラクタ（必要に応じて drinkName と stock を設定）
	public VendingMachine(String drinkName, int stock) {
		this.drinkName = drinkName;
		this.stock = stock;
	}

	public void buy() {
		System.out.println(drinkName + "を購入しました。");
	}

	// 必要に応じて
	public void stockSupply(int amount) {
		System.out.println("在庫を" + amount + "個追加しました。\n"
				+ stock + "個になりました。");
		stock += amount;
	}

	// 必要に応じて（カプセル化）
	public void getStock() {
		System.out.println("ストックは" + stock + "個です。");
	}
}
```

### Lesson12〜14 の流れ（抽象クラス・インタフェース・ポリモーフィズム）

- **共通**: オーバーライド／実装したメソッドには **public** を付けておく（Java では省略しても暗に public だが、読みやすさのため明示する）。
- **Lesson12（抽象クラス）**: サブクラスで書き換えるならスーパークラスに具体を書かなくてよい→「基本とするだけのクラス」は**抽象メソッド**に。1つでも抽象メソッドがあるクラスが**抽象クラス**。
- **Lesson13（インタフェース）**: 抽象を極限まで進めると抽象メソッドだけ→**インタフェース**として定義。単一継承ではなく**複数 implements 可能**（例：Movable を足して「動く」役割を追加）。
- **Lesson14（ポリモーフィズム）**: 抽象クラス型・インタフェース型を「型として使い」、同じメッセージで異なる振る舞いをさせる扱いをまとめる。

**抽象クラスとインタフェースの比較**

| 項目 | 抽象クラス | インタフェース |
|------|------------|----------------|
| キーワード（利用側） | extends | implements |
| 継承・実装の数 | 1つだけ | 複数可能 |
| 抽象メソッド | 1つ以上で抽象クラス | 原則すべて抽象（約束だけ） |
| 具象メソッド | 持てる | 持たない（入門では default は扱わない） |
| フィールド | 持てる | 定数のみ |
| 使い分け | 共通の土台・is-a がはっきり | 振る舞いの約束だけ・複数役割を足したい |

**講義で押さえること**: 用語は「継承（extends）」vs「実装（implements）」を説明しておく。「共通フィールド・実装がある」「is-a がはっきり」→抽象クラス。「約束だけ」「複数役割を足したい」→インタフェース。インタフェースのメソッドは暗に `public abstract`、実装側ではオーバーライド時に暗に public。ポリモーフィズムは、型変数に具象インスタンスを入れてメソッドを呼ぶと実装側が動く、という流れを 1〜2 例で示す。

---

## 用語・コード

- **用語・アクセス修飾子・コメント**: **`.cursorrules` の「3. Javaコーディング規約」に規定**（用語はスーパー/サブ、protected は使わず public・無印・private のみ、コメントの入れ方など）。ここでは補足のみ：protected を避ける理由は初学者の混乱防止、コメントはフィールド・コンストラクタ・getter/setter の直前とメソッド上部・main 内に。

### ソースコードの基本（書き方の禁止・推奨）

**規定は `.cursorrules` の「3. Javaコーディング規約」に集約**。以下は理由と具体例の参照用。

- **1行書き**: 本体に処理があるコンストラクタ・メソッドは1行にまとめない。`{` の直後で改行し、本体と `}` を改行して書く。**例外：中身が空のコンストラクタは1行でよい**（例: `public VendingMachine() {}`）。`.cursorrules` に同じ規定あり。
  - **書かない例**（中身があるのに1行）: `public Dog(String name) { this.name = name; }`
  - **書く例**（括弧の次行から本体、インデントはタブ）: 上記「自販機の基本クラス設計」の `VendingMachine(String, int)` や `buy()` を参照。
  - **1行でよい例**（空のコンストラクタ）: `public VendingMachine() {}`
- **インデントはタブ**: 教材に掲載する Java コード（pre・textarea の両方）のインデントは**タブ**で行う。スペースはコピペ先の環境でずれ・崩れが起きやすいため。`.cursorrules` に同じ規定あり。

---

## 参照（_Doc の役割）

| ファイル | 役割 |
|----------|------|
| **.cursorrules** | 絶対ルール（HTML・ファイル名・デザイン概要・Java規約・ワークフロー） |
| **_Doc/4-デザインルール.md** | デザイン詳細（色・余白・pre/details/解答ブロック・概要ファイル） |
| **_Doc/3-EXERCISE.md** | 練習問題の形式・問題ブロック・ヒント/解答の構成 |
| **_Doc/2-テキスト作成ガイダンス.md** | テキスト生成時の流れ・題材・復習の入れ方 |
| **_Doc/1-カリキュラムと進行.md** | 日程・進行の狙い・動画URL の元データ |
| **_Doc/ファイル更新ルール.md** | Git 運用の補足（post-commit・手動実行・Pushover 等） |

※ その他（不足項目・ファイル名リネーム一覧・カリキュラム修正案など）は _Doc 内にあり、必要に応じて参照する。演習・DB の流れは `_Doc/演習とDBの流れ.md`。
